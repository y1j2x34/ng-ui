!function(e,t){"use strict";"object"==typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define("Class",t):e.Class=t()}(this,function(){function e(){}function t(){return new(i.apply(null,arguments))}function i(t,i){var r=arguments;switch(r.length){case 0:throw new Error("Illegal arguments");case 1:l(r[0])?i={}:(i=t,t=i.name||"<anonymous>")}return n(e,i)}function n(t,i){function l(){}1===arguments.length&&(u(t)?i={}:(i=t,t=e)),l.prototype=t.prototype;var f=Object.getOwnPropertyNames(i),p=i.init;v(f,"init"),"function"!=typeof p&&(p=g);var y=i.name||"Class",w=i.pythonic!==!1;w&&(p=m(p));var b=r(y,p);b.prototype=new l,o(b.prototype,"constructor",b),o(b.prototype,"uber",t.prototype),o(b.prototype,"clazz",b),o(b.prototype,"superclass",t),o(b,"superclass",t),o(b,"extend",function(e){return n.call(b,b,e)});var k=function(e){var t=this;1===arguments.length&&d(e)?t.superclass.apply(t,e):t.superclass.apply(t,arguments)};o(b.prototype,"$super",k);var C=i.statics||{};return v(f,"statics"),s(C,b,Object.getOwnPropertyNames(C)),w?c(i,f,function(e,t){var i=e[t];u(i)?b.prototype[t]=m(i):a(e,b.prototype,t)}):s(i,b.prototype,f,function(e,t,i){return u(e[i])}),h(f,function(e){return u(i[e])}),b}function r(e,t){return y[e]||(y[e]=new Function("init","return function "+e+"(){return init.apply(this, arguments);}")),y[e](t)}function o(e,t,i){Object.defineProperty(e,t,{value:i,enumerable:!1,configurable:!1,writable:!1})}function c(e,t,i){u(i)||(i=g),l(t)&&i(e,t);for(var n=0;n<t.length;n++)i(e,t[n])}function s(e,t,i,n){u(n)||(n=p),c(e,i,function(e,i){n(e,t,i)&&a(e,t,i)})}function a(e,t,i){var n=Object.getOwnPropertyDescriptor(e,i);f(n)&&Object.defineProperty(t,i,n)}function l(e){return"string"==typeof e}function u(e){return"function"==typeof e}function f(e){return void 0!==e&&null!==e}function d(e){return e+""=="[object Arguments]"}function p(){return!0}function v(e,t){var i=e.indexOf(t);return i!==-1?e.splice(i,1):[]}function h(e,t){if(!t)return[];for(var i=[],n=0;n<e.length;n++){var r=t(e[n]);if("break"===r)break;r&&(i.push(e[n]),e.splice(n,1))}return i}function m(e){return function(){var t=this,i=[t];return i.push.apply(i,arguments),e.apply(t,i)}}function g(){}var y={};return e.create=i,e.extend=n,e.singleton=t,e}),define("supports/opath",["Class"],function(e){"use strict";function t(e,t){return t||{}}return e.create({name:"ObjectPath",pythonic:!1,init:function(e,t){this.root=e||{},this.sep=t||"."},get:function(e,i){if("string"!=typeof e)throw new Error("Illegal argument : "+e);"function"!=typeof i&&(i=t);for(var n=this,r=e.split(n.sep),o=n.root,c=0;c<r.length;c++){var s=r[c],a=i.call(n,s,o[s],r,c);o[s]=a,o=a}return o}})}),define("Subject",["Class"],function(e){"use strict";function t(e,t,i,n,r){this.source=e,this.name=t,this.data=i,this.callback=n,this.times=r||1/0}function i(e,i,n,r,o){void 0===i&&(i=void 0+"");for(var c=i.split(","),s=0;s<c.length;s++)!function(i){var c=i.split(".");i=c[0];var s=c[1],a=e.observers[i];a||(a={},e.observers[i]=a);var l=a[s];l||(l=[],a[s]=l),l.push(new t(e,i,r,n,o))}(c[s].trim())}function n(e,t,n,r){var o;"function"==typeof n?(o=r,r=n):"function"==typeof r&&(o=n),i(e,t,r,o)}function r(e,t,n,r){var o;"function"==typeof n?(o=r,r=n):"function"==typeof r&&(o=n),i(e,t,r,o,1)}function o(e,t){void 0===t&&(t=void 0+"");for(var i=t.split(","),n=Array.prototype.slice.call(arguments,2),r=0;r<i.length;r++)!function(t){var i=t.split(".");t=i[0];var r=i[1],o=e.observers[t];if(!o)return!1;r?s(e,o[r],n):c(e,o,n)}(i[r].trim())}function c(e,t,i){var n=!1;for(var r in t){n=!0;var o=t[r];if(o&&o.length>0)for(var c=0;c<o.length;c++){var s=o[c];l(e,s,i)}}return n}function s(e,t,i){if(t&&t.length>0){for(var n=0;n<t.length;n++){l(e,t[n],i)}return!0}}function a(e,t,i){if("*"===t)return void(e.observers={});void 0===t&&(t=void 0+"");for(var n=t.split(","),r=0;r<n.length;r++)!function(e,t,i){var n=t.split(".");t=n[0];var r=n[1],o=e.observers[t];if(!o)return!1;if(r)o[r]=void 0,delete o[r];else if("function"==typeof i)for(var c in o)for(var s=o[c],a=0;a>-1&&a<s.length;a++){var l=s[a];l&&l.callback===i&&(s.splice(a,1),a--)}else e.observers[t]={}}(e,n[r].trim(),i)}function l(e,t,i){if(void 0!==t)try{var n=[t];n.push.apply(n,i),t.callback.apply(t.source,n)}catch(e){throw e}finally{t.times-=1}}return e.create("Subject",{init:function(e){e.observers={}},on:n,one:r,trigger:o,off:a})}),define("listview-item.model",["Class"],function(e){"use strict";return e.create({name:"ListViewItemModel",init:function(e,t,i){e.id=t,e.select(!1),e.data=i},select:function(e,t){e.selected=t}})}),define("listview.model",["Class","Subject","./listview-item.model"],function(e,t,i){"use strict";function n(e){e.$super(),e.items={},e.itemIds=[],e.id="exp-"+e.clazz.nextSeq(),e.selects=[],e.itemSeq=m()}function r(e){return e instanceof Array}function o(e,t){var n=new i(e.id+"-"+e.itemSeq(),t);e.items[n.id]=n,e.itemIds.push(n.id),e.trigger(e.id+".create",n),e.trigger("create",n)}function c(e,t){var i=[];t.forEach(function(t){e.items.hasOwnProperty(t)&&i.push(e.items[t])}),e._deleteItems(i)}function s(e,t){t.forEach(function(t){delete e.items[t.id];var i=e.itemIds.indexOf(t.id);e.itemIds.splice(i,1);var n=e.selects.indexOf(t.id);e.selects.splice(n,1),e.trigger(e.id+".removeItem",t),e.trigger("removeItem",t)}),e.trigger(e.id+".remove",t),e.trigger("remove",t)}function a(e,t){if(t.data instanceof Array){var i=[];for(var n in e.items)i.push(e.items[n]);e._deleteItems(i),t.data.forEach(function(t){e.createItem(t)})}t.theme&&e.clazz.SUPPORTED_THEMES.indexOf(t.theme)!==-1&&(e.trigger(e.id+".updateTheme",t.theme),e.trigger("updateTheme",t.theme)),t.spec&&e.clazz.SUPPORTED_SPECS.indexOf(t.spec)!==-1&&(e.trigger(e.id+".updateSpec",t.spec),e.trigger("updateSpec",t.spec)),e.clazz.SUPPORTED_CHECK_VALUES.indexOf(t.check+"")!==-1&&(e.trigger(e.id+".updateCheck",t.check),e.trigger("updateCheck",t.check))}function l(e){var t=Array.prototype.slice.call(arguments,1),i=e.selects.slice(),n={};e.selects.forEach(function(e,t){n[e]=t}),t.forEach(function(t){e.items[t].select(!0),void 0===n[t]&&e.selects.push(t)}),e.trigger(e.id+".select",e.selects,i),e.trigger("select",e.selects,i)}function u(e){var t=Array.prototype.slice.call(arguments,1),i=e.selects.slice();t.forEach(function(t){var i=e.selects.indexOf(t);i>-1&&(e.selects.splice(i,1),e.items[t].select(!1))}),e.trigger(e.id+".select",e.selects,i),e.trigger("select",e.selects,i)}function f(e){e.select.apply(e,e.itemIds)}function d(e){e.unselect.apply(e,e.selects)}function p(e,t){if(!r(t)){var i=[];return t.forEach(function(t){var n=e.items[t];void 0!==n&&i.push(n)}),i}}function v(e,t){if("*"===t)return!1;if("string"==typeof t){if("ui"===t.split(".")[1])return!1}return e.uber.off.apply(e,Array.prototype.slice.call(arguments,1))}function h(e,t){if(!(e instanceof Array&&t instanceof Array))return[];if(e.length<1||t.length<1)return t;var i={};e.forEach(function(e,t){i[e]=t});var n=[];return t.forEach(function(e){void 0===i[e]&&n.push(e)}),n}function m(){var e=0;return function(){return e++}}return e.extend(t,{name:"ListViewModel",statics:{nextSeq:m(),SUPPORTED_SPECS:["xs","sm","md","lg"],SUPPORTED_THEMES:["grid","list"],SUPPORTED_CHECK_VALUES:["true","false","show","hide"],relc:h},init:n,createItem:o,deleteItem:c,_deleteItems:s,update:a,select:l,unselect:u,selectAll:f,unselectAll:d,getItems:p,off:v})}),define("dragselector.plugin",["jquery"],function(e){"use strict";return e.fn.dragSelector=function(t){return t===!0?this.each(function(t,i){var n=e(i),r=n.find(".drag-selector");if(!(r.length<1)){var o=r.data("eventId");void 0!==o&&(n.off("mousedown."+o),e(document).off("mousemove."+o))}}):this.each(function(t,i){function n(t){var n,r,o=e(t.target);if(t.target===i)n=t.offsetX,r=t.offsetY;else{var s=o.offset(),a=c.offset();n=s.left-a.left+t.offsetX,r=s.top-a.top+t.offsetY}return{left:n,top:r}}function r(e,t){return function(i){s.addClass("show");var r=n(i),o=r.left,a=r.top,l=Math.min(o,e),u=Math.abs(e-o),f=Math.min(a,t),d=Math.abs(t-a),p={left:l,top:f,width:u,height:d};s.css(p),c.trigger("dragSelect",p)}}var o=(new Date).getTime()+t,c=e(i),s=e("<div>");s.data("eventId",o),s.addClass("drag-selector"),s.appendTo(c);var a="mousemove."+o;c.on("mousedown."+o,function(e){if(0===e.button){s.css({width:0,height:0});var t=n(e);c.on(a,r(t.left,t.top))}}),e(document).on("mouseup."+o,function(e){0===e.button&&(s.removeClass("show"),c.off(a))})})},e.fn.dragSelector}),define("listview.plugin",["jquery","./supports/opath","./listview.model","./dragselector.plugin"],function(e,t,i){"use strict";function n(t,n){var o=e("<div>"),l=e("<ul>");o.addClass("listview").addClass("listview-"+t.theme).addClass("listview-"+t.spec),t.check+""!="false"&&t.check+""!="hide"||o.addClass("hide-check"),l.addClass("listview-item-list"),o.append(l);var f=new i;f.on(f.id+".remove",function(t,i){var n=[];i.forEach(function(e){n.push(e.id)}),e(r(n)).remove()}),f.on(f.id+".select",function(t,n,o){var c,s=i.relc(o,n),a=i.relc(n,o);a.length>0&&(c=r(a),e(c).removeClass("active").each(function(t,i){e(i).find(".item-check>input[type=checkbox]").removeAttr("checked").removeProp("checked")})),s.length>0&&(c=r(s),e(c).addClass("active").each(function(t,i){e(i).find(".item-check>input[type=checkbox]").attr("checked","checked").prop("checked","checked")}))}),f.on(f.id+".create",function(i,n){var r=e("<li>");r.attr({id:n.id}).addClass("listview-item");var o;switch(typeof t.template){case"string":o=t.template;break;case"function":o=t.template(n);break;default:o=s()}r.append(a(n,o)),r.data(u,n),l.append(r)}),f.on(f.id+".updateTheme",function(e,i){o.removeClass("listview-grid").removeClass("listview-list").addClass("listview-"+i),t.theme=i}),f.on(f.id+".updateSpec",function(e,i){["xs","sm","md","lg"].forEach(function(e){o.removeClass("listview-"+e)}),o.addClass("listview-"+i),t.spec=i}),f.on(f.id+".updateCheck",function(e,i){switch(i+""){case"true":case"show":o.removeClass("hide-check");break;case"false":case"hide":o.addClass("hide-check")}t.check=i}),o.on("click",function(t){var i=e(t.target);if(o.prop("dragged"))return void o.removeProp("dragged");!i.is(o)&&!i.is(l)||t.ctrlKey||t.shiftKey||f.unselectAll()}),o.on("click",".listview-item",function(t){var i=e(t.currentTarget),n=i.data(u),r=i.index();if(t.shiftKey){var c=o.find(".listview-item"),s=f.shiftSelectIndex;void 0===s&&(s=f.selects.length>0?o.find("#"+f.selects[f.selects.length-1]).index():0,f.shiftSelectIndex=s);var a=[],l=Math.min(s,r),d=Math.max(s,r);c.slice(l,d+1).each(function(t,i){a.push(e(i).data(u).id)});var p=f.selects.filter(function(t){var i=e("#"+t).index();return i<l||i>d});f.unselect.apply(f,p),f.select.apply(f,a)}else t.ctrlKey?n.selected?f.unselect(n.id):(f.select(n.id),f.shiftSelectIndex=r):n.selected&&f.selects.length<2?f.unselectAll():(f.unselectAll(),f.select(n.id),f.shiftSelectIndex=r);t.stopPropagation()}),o.on("dblclick",".item-name",function(t){var i=e(t.currentTarget),n=i.closest(".listview-item").data(u);i.attr("contenteditable","").text(n.data.cfg.name).focus()}),o.on("mousedown",".item-name[contenteditable]",function(e){e.stopPropagation()}),o.on("keyup",".item-name",function(t){var i=e(t.currentTarget);if(t.ctrlKey){i.removeAttr("contenteditable");var n=i.closest(".listview-item").data(u);n.data.cfg.name=i.text().trim(),i.closest(".listview-item-details").attr("title",i.text().trim()),f.trigger("submit",n,"name"),t.preventDefault(),t.stopPropagation()}}),o.on("focusout",".item-name",function(t){var i=e(t.currentTarget);if(void 0!==i.attr("contenteditable")){i.removeAttr("contenteditable");var n=i.closest(".listview-item").data(u);i.text(n.data.cfg.name)}});var p=!1,v=!1;return d.on("keydown."+f.id,function(e){p=e.shiftKey,v=e.ctrlKey,65===e.keyCode&&e.ctrlKey&&(f.selectAll(),e.stopPropagation(),e.preventDefault())}),d.on("keyup."+f.id,function(e){17===e.keyCode&&(v=!1),16===e.keyCode&&(p=!1)}),o.on("dragSelect",function(t,i){if(!(v&&i.width<20&&i.height<20)){var n=i.top+i.height;o.prop("dragged",!0);var r=[],s=[],a=o.offset(),l=o.find(".listview-item"),d=l.height(),h=l.width();l.each(function(t,o){var l=e(o),m=l.data(u),g=l.offset(),y=g.top-a.top;return y>n?(p||v||s.push.apply(s,f.itemIds.slice(t)),!1):y+d<i.top?void(p||v||m.selected&&s.push(m.id)):void(c(i,{left:g.left-a.left,top:y,width:h,height:d})?m.selected||r.push(m.id):p||v||m.selected&&s.push(m.id))}),f.unselect.apply(f,s),f.select.apply(f,r)}}),o.dragSelector(),n.empty().append(o),t.data instanceof Array&&f.update({data:t.data}),f}function r(e){var t=[];return e.forEach(function(e){var i=document.getElementById(e);void 0!==i&&t.push(i)}),t}function o(e,t){e.off(e.id),t.removeData(l),t.dragSelector(!1),t.find(".listview").remove(),d.off("keydown."+e.id).off("keyup."+e.id)}function c(e,t){return!(e.left>=t.left&&e.left>=t.left+t.width)&&(!(e.left<=t.left&&e.left+e.width<=t.left)&&(!(e.top>=t.top&&e.top>=t.top+t.height)&&!(e.top<=t.top&&e.top+e.height<=t.top)))}function s(){return["<ul class='listview-item-details' title='${cfg.name}'>","<li class='item-check'><input type='checkbox'></li>","<li class='item-icon ${cfg.icon}'></li>","<li class='item-name'>${cfg.name}</li>","</ul>"].join("")}function a(e,i){var n=new t(e.data,".");return i.replace(/\$\{([^\}]+)\}/g,function(e,t){return n.get(t)})}var l="listview",u="listview-item-data",f={theme:"grid",spec:"md",template:s,data:[],check:"hide"},d=e(document);e.fn.listview=function(t){if(void 0!==t&&null!==t)return t===!1?this.each(function(t,n){var r=e(n),c=r.data(l);c instanceof i&&o(c,r)}):(t=e.extend({},f,t),this.each(function(r,o){var c=e(o),s=c.data(l);if(s instanceof i)return void s.update(t);s=n(t,c),c.data(l,s)}))}}),require(["listview.plugin"]),define("listview",["jquery","listview.plugin"],function(e){"use strict";return e.fn.listview});
//# sourceMappingURL=listview.min.js.map
